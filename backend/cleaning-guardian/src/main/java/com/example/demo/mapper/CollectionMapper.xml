<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.CollectionMapper">

    <select id="selectAllPollutions" resultType="com.example.demo.vo.PollutionsVO">
        SELECT 
            "pol_idx" as polIdx,
            "game_idx" as gameIdx,
            "pol_name" as polName,
            "pol_desc" as polDesc,
            "pol_img1" as polImg1,
            "pol_img2" as polImg2,
            "pol_img3" as polImg3,
            "type",
            "created_at" as createdAt
        FROM "pollutions"
        ORDER BY "pol_idx"
    </select>

    <select id="selectUserCollections" resultType="com.example.demo.vo.UserCollectionVO">
        SELECT 
            "collection_idx" as collectionIdx,
            "email",
            "pol_idx" as polIdx,
            "collected_at" as collectedAt
        FROM "user_collection"
        WHERE "email" = #{email}
        ORDER BY "collected_at" DESC
    </select>

    <select id="selectPollution" resultType="com.example.demo.vo.PollutionsVO">
        SELECT 
            "pol_idx" as polIdx,
            "game_idx" as gameIdx,
            "pol_name" as polName,
            "pol_desc" as polDesc,
            "pol_img1" as polImg1,
            "pol_img2" as polImg2,
            "pol_img3" as polImg3,
            "type",
            "created_at" as createdAt
        FROM "pollutions"
        WHERE "pol_idx" = #{polIdx}
    </select>

    <select id="selectUserCollection" resultType="com.example.demo.vo.UserCollectionVO">
        SELECT 
            "collection_idx" as collectionIdx,
            "email",
            "pol_idx" as polIdx,
            "collected_at" as collectedAt
        FROM "user_collection"
        WHERE "pol_idx" = #{polIdx}
    </select>

</mapper> 