<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.GamePlayMapper">

<!-- 스킨 업데이트 -->
<update id="patchSkin" parameterType="com.example.demo.dto.UserSkinDTO">
	UPDATE "user_skins"
	SET "uskin_idx" = #{skin_idx}
	WHERE "email" = #{email}
</update>


<!-- 스테이지 클리어 후 stageClear에 정보 입력. -->
<insert id="stageClear" parameterType="com.example.demo.dto.GameClearDTO">
	INSERT INTO "game_clear" (
		"email",
		"stage_idx",
		"success_yn",
		"created_at"
	) VALUES (
		#{email},
		#{stage_idx},
		#{successYn},
		SYSDATE
	)
</insert>

<!-- 보상 수령 (포인트) -->
<insert id="postPointReward" parameterType="com.example.demo.dto.PointDTO">
	UPDATE "balance" 
	SET   "point" = "point" + #{value}
	WHERE "email" = #{email}
</insert>


</mapper>